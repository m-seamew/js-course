//Task1
function findChairs(vararr, num) {
  let valueArr = vararr.value.split('\n');
  let numChairs = (+num.value);

  if (numChairs <= 0) {
    return true;
  }
  //вопрос, почему данный if не работает в тернарном виде -  numChairs <=0? return true: null;

  let tempLength = valueArr.length;
  let result = [];

  for (let i = 0; i < tempLength; i++) {

    let tempArray = [];
    tempArray[i] = valueArr[i].split(', ');

    let guestNum = tempArray[i][0].split('').length;
    let tempResult = tempArray[i][1] - guestNum;


    tempResult <= 0 ? tempResult = 0 : null;
    tempResult >= numChairs ? tempResult = numChairs : null;

    if (numChairs == 0) {
      break;
    }
    else {
      numChairs = numChairs - tempResult;
      result[i] = tempResult;
    }
  }

  switch (true) {
    case numChairs == 0: return result;
    case numChairs > 0: return false;
  }
}



document.querySelector("#task1").onsubmit = (e) => {
  e.preventDefault();

  let variableArr = document.querySelector("#textarea1");
  let numChairs = document.querySelector(".input__task1");

  let result = findChairs(variableArr, numChairs);

  switch (result) {
    case true:
      document.querySelector("#task1-ans").innerHTML = `Вам не нужны доп. стулья`;
      break;
    case false:
      document.querySelector("#task1-ans").innerHTML = `Стульев недостаточно`;
      break;
    default:
      document.querySelector("#task1-ans").innerHTML = `[ ${result.join(", ")} ]`;
      break;
  }
}



//Task 2
function deskResult(variable) {
  let variableArr = variable.value.split('\n');
  let tempArr = [];
  let tempLength = variableArr.length;

  for (let i = 0; i < tempLength; i++) {
    tempArr[i] = variableArr[i].split(',');
    tempL = tempArr[i].length;

    for (let k = 0; k < tempL; k++) {
      tempArr[i][k] = +tempArr[i][k];

    }
  }
  let checkRow = [];
  let checkCol = [];
  for (let i = 0; i < tempLength; i++) {




    for (let k = 0; k < tempL; k++) {
      checkRow[k] = tempArr[i][k];
      checkCol[k] = tempArr[k][i];
    }
  }

  let checkRowLength = checkRow.length;
  let checkColLength = checkCol.length;

  let ans;

  // Проверка строк
  for (let i = 1; i < checkRowLength; i++) {
    if (checkRow[0] == checkRow[i]) {
      ans = checkRow[i];
    } else {
      ans = false;
      break;
    }
  }
  switch (ans) {
    case false: null; break;
    case 1: return 1;
    case 2: return 2;
  }

  //1 диагональ

  for (let i = 1; i < tempLength; i++) {

    if (tempArr[0][0] == tempArr[i][i]) {
      ans = tempArr[i][i];
    } else {
      ans = false;
      break;
    }
  }
  switch (ans) {
    case false: null; break;
    case 1: return 1;
    case 2: return 2;
  }

  //Проверка столбцов
  for (let i = 1; i < checkColLength; i++) {
    if (checkCol[0] == checkCol[i]) {
      ans = checkCol[i];
    } else {
      ans = false;
      break;
    }

  }
  switch (ans) {
    case false: null; break;
    case 1: return 1;
    case 2: return 2;
  }

  //2 диагональ
  let k = tempLength-2;
  for (let i = 1; i < tempLength; i++) {

    let checkDia = [];
    checkDia[i] = tempArr[i][k];

    if (tempArr[0][tempLength-1] == checkDia[i]) {
      ans = checkDia[i];
    } else {
      ans = false;
      break;
    }

    k = k - 1;


  }
  switch (ans) {
    case false: null; break;
    case 1:
      console.log('text');
      return 1;
    case 2: return 2;
  }

  //Проверка на cвободные клетки
  for (let i = 0; i < tempLength; i++) {
    for (let k = 0; k < tempL; k++) {
      if (tempArr[i][k] == 0) {
        return -1;
      }
    }
  }
  return 0;
}


document.querySelector("#task2").onsubmit = (e) => {
  e.preventDefault();
  let deskStatus = document.querySelector("#textarea2");
  let result = deskResult(deskStatus);
  switch (result) {
    case -1: alert("game in process"); break;
    case 1: alert("x win"); break;
    case 2: alert("0 win"); break;
    case 0: alert("cat games"); break;
  }

}