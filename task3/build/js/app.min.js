//Task1


// Функция проверки введенных данных на валидность
function checkTextarea() {

  let checkArray = new Array;
  checkArray = document.getElementById('textarea1').value.split("\n");

  let length = checkArray.length;
  let tempArray = new Array;

  for (i = 0; i < length; i++) {
    tempArray = tempArray.concat(checkArray[i].split(","));
  }

  let tempLength = tempArray.length;
  let error = false;

  for (i = 0; i < tempLength; i++) {

    if (tempArray[i] == "") {
      alert("Задача 1. Не вводите пустых сторк или пустых значений");
      error = true;
      break;
    }

    tempArray[i] = (+tempArray[i]);

    if (isNaN(tempArray[i]) == true) {
      alert("Задача 1. Вы можете вводить только чилса");
      error = true;
      break;
    }
  }


  return error;
}

// Проверка данных на вилдность
document.getElementById('textarea1').onblur = () => {
  let text = document.getElementById('textarea1').value;
  if (text != "") {
    let clean = checkTextarea();
    clean == true ? document.getElementById('textarea1').value = "" : null;
  }
}


//Определение суммы меньших чисел
document.getElementById('task1').onsubmit = () => {
  let textValue = document.getElementById('textarea1').value
  let tempArray = textValue.split("\n");

  let length = tempArray.length;
  let ans = 0;

  for (i = 0; i < length; i++) {
    let r = new Array;
    r = (tempArray[i].split(","));

    let num = r.length;
    for (k = 0; k < num; k++) {
      r[k] = (+r[k]);
    }

    ans = ans + Math.min(...r);
  }
  document.getElementById("task1-ans").innerHTML = `Минимальное суммарное значение - ${ans}`;
  return false;
}

//Task2
//Фунеция валидации поля
function textarea2() {
  let checkArray = new Array;
  checkArray = document.getElementById('textarea2').value.split(",");

  let length = checkArray.length;
  let error = false;

  for (i = 0; i < length; i++) {

    if (checkArray[i] == "") {
      alert("Задача 2. Не вводите пустых значений");
      error = true;
      break;
    }

    checkArray[i] = (+checkArray[i]);
    if (isNaN(checkArray[i]) == true) {
      alert("Задача 2. Вы можете вводить только чилса");
      error = true;
      break;
    }
  }

  return error;
}

//Функция определения двух максимальных значений
function twoAges() {
  let ages = document.getElementById("textarea2").value.split(',');

  let length = ages.length;
  for (i = 0; i < length; i++) {
    ages[i] = +ages[i];
  }

  let maxFirst = Math.max(...ages);
  let indexMaxfirst = ages.indexOf(maxFirst);

  let deleted = ages.splice(indexMaxfirst, 1);

  let maxSecond = Math.max(...ages);

  let result = [maxSecond, maxFirst];

  return result;
}


// Проверка поля на валидность
document.getElementById("textarea2").onblur = () => {
  let text = document.getElementById('textarea2').value;
  if (text != "") {
    let clean = textarea2();
    clean == true ? document.getElementById('textarea2').value = "" : null;
  }
}

// Расчет результата
document.getElementById("task2").onsubmit = () => {
  let result = twoAges();
  document.getElementById("task2-ans").innerHTML = `Два самых старших числа - ${result}`
  return false;
}

//Task3

function shoertestWord() {
  let text = document.getElementById("textarea3").value.split(/\s+|,+/);
  let textLength = text.length;
  let min = text[0].length;
  for (i = 1; i < textLength; i++) {
    let tempLength = text[i].length;
    tempLength < min ? min = tempLength : null;
  }
  return min;
}

document.getElementById("task3").onsubmit = () => {
  let result = shoertestWord();
  document.getElementById("task3-ans").innerHTML = `Длина самого короткого слова - ${result}`;
  return false;
}



//Task4
function createSentance() {
  let text = document.getElementById("textarea4").value.split(" ");
  let textLength = text.length;

  let mask = /\d+/g;
  let result = new Array;

  for (i = 0; i < textLength; i++) {

    let num = text[i].match(mask); //определение цифры - порядка в массиве
    num = (+num) - 1;

    result[num] = text[i];

  }

  let ans = result.join(" ");
  return ans;

}

document.getElementById("task4").onsubmit = () => {
  let result = createSentance();
  document.getElementById("task4-ans").innerHTML = result;
  return false;
}


//Task5

function changeCSS() {
  let color = document.getElementById("color").value;
  let height = document.getElementById("height").value;


  document.getElementById("circle").style.cssText = `background-color: ${color};
  height: ${height};
  width: ${height};
 `; 
}

document.getElementById("task5").onsubmit = () => {
  changeCSS();
  return false;
}